<!DOCTYPE html>
<html lang="en">
<head>
    <title>Lazy Toad Studios</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=DotGothic16&display=swap" rel="stylesheet">
    <style>
    html, body {
        margin: 0;
        padding: 0;
        background: #FDEDF4;
        color: #222;
        font-family: 'Press Start 2P', 'DotGothic16', monospace;
        width: 100vw;
        overflow-x: hidden;
        /* INITIAL PADDING: Space for the banner when visible */
        padding-top: 30px;
    }
    body { min-height: 100vh; }

    /* News Banner Styles */
    .news-banner {
        background-color: #FFFFFF;
        color: #181818;
        padding: 8px 20px;
        width: 100vw;
        box-sizing: border-box;
        z-index: 1000;
        position: fixed; /* Makes it stick to the top */
        top: 0;
        left: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        transition: opacity 0.3s ease-in-out;
    }

    .news-banner.hidden {
        opacity: 0;
        pointer-events: none;
    }

    .news-banner p {
        font-family: 'Press Start 2P', monospace !important;
        font-size: 0.9rem;
        margin: 0;
        line-height: 1.2;
        letter-spacing: 0.04em;
        text-transform: uppercase;
        flex-grow: 1;
        text-align: center;
    }

    .close-banner-btn {
        background: none;
        border: none;
        color: #181818;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0 5px;
        line-height: 1;
        transition: color 0.2s ease;
        flex-shrink: 0;
    }

    .close-banner-btn:hover {
        color: #555;
    }
    /* END News Banner Styles */

    .hero-header {
        width: 100vw;
        display: flex; /* Global default is flex, overridden by grid for desktop in media query */
        flex-direction: row;
        align-items: flex-end; /* Keep align-items to flex-end for general header alignment */
        justify-content: space-between;
        margin-top: 36px;
        margin-bottom: 0;
        box-sizing: border-box;
        padding-left: 2vw;
        padding-right: 4vw;
        position: relative; /* Ensure hero-header is positioned relative */
    }
    .hero-logo-col {
        display: flex;
        flex-direction: column; /* Changed to column to stack logo and new box */
        align-items: flex-start; /* Align items to the start for logo and box */
        justify-content: flex-start;
        flex: 0 0 auto;
    }
    .logo-circle {
        display: flex;
        align-items: center;
        justify-content: center;
        background: #fff;
        border-radius: 50%;
        box-shadow: 0 2px 12px 0 rgba(0,0,0,0.04);
        padding: 18px;
        margin-bottom: 10px; /* Space between logo and new box */
    }
    .hero-logo {
        display: block;
        width: auto;
        height: 150px;
        min-width: 0;
        min-height: 0;
        margin: 0;
        object-fit: contain;
        transition: height 0.2s;
    }
    .hero-nav-col {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: flex-end;
        min-width: 0;
        min-height: 0;
        padding: 0;
        margin-right: 0;
    }
    .hero-nav-title,
    .main-links a,
    .footer-social-link,
    h1, h2, h3, h4, h5, h6 {
        font-family: 'Press Start 2P', monospace !important;
        letter-spacing: 0.04em;
    }
    /* MAIN TITLE FONT & OUTLINE */
    .hero-nav-title {
        color: #fff; /* White text */
        font-size: 2.5rem; /* Made smaller */
        -webkit-text-stroke: 2px #000; /* Bolder 2px black outline for Webkit browsers */
        text-stroke: 2px #000;          /* Bolder 2px black outline for standard browsers */
        font-weight: normal;
        word-break: break-word;
        text-align: right;
        margin-bottom: 4px;
        position: relative; /* For positioning hopped toads */
        padding-left: 0; /* REMOVE THIS PADDING as toads are now outside */
    }
    /* Subtitle uses DotGothic16 by default (desktop) - unchanged */
    .hero-nav-subtitle {
        font-family: 'DotGothic16', monospace !important;
        font-size: 3rem; /* Made smaller */
        color: #fff;
        text-align: right; /* Current desktop alignment */
        margin-bottom: 18px;
        margin-top: -6px;
        letter-spacing: 0.04em;
        text-shadow:
            -2px -2px 0 #000,
            2px -2px 0 #000,
            -2px 2px 0 #000,
            2px 2px 0 #000,
            0px -2px 0 #000,
            0px 2px 0 #000,
            -2px 0px 0 #000,
            2px 0px 0 #000;
        -webkit-text-stroke: 0;
        text-stroke: 0;
        font-weight: normal;
        word-break: break-word;
    }
    /* Robust Frog Mask Animation */
    .hero-nav-subtitle .char-frog-wrap {
        position: relative;
        display: inline-block;
        vertical-align: baseline;
    }
    .hero-nav-subtitle .letter-wrap {
        display: inline-block;
        position: relative;
        z-index: 1;
    }
    .hero-nav-subtitle .frog-wrap {
        position: absolute;
        left: 50%;
        bottom: 0;
        width: 1.2em;
        height: 0.7em; /* shows only top of frog when peeping */
        transform: translateX(-50%);
        overflow: hidden;
        pointer-events: none;
        z-index: 2;
        display: block;
        transition: height 0.3s;
    }
    .hero-nav-subtitle .frog-wrap.fully-raised {
        height: 1.2em; /* Fully raised: show all */
    }
    .hero-nav-subtitle .frog-peep {
        width: 1.2em;
        height: 1.2em;
        position: absolute;
        left: 0;
        bottom: 0;
        transition: transform 0.7s cubic-bezier(.48,1.48,.56,.97);
        will-change: transform;
        display: block;
        transform: translateY(100%);
        cursor: pointer; /* Make toads clickable */
    }
    .hero-nav-subtitle .frog-peep.peeping {
        transform: translateY(30%);
    }
    .hero-nav-subtitle .frog-peep.fully-raised {
        transform: translateY(0);
    }
    .hero-nav-subtitle .the-letter {
        display: inline-block;
        transition: transform 0.7s cubic-bezier(.48,1.48,.56,.97), opacity 0.3s;
        will-change: transform;
        z-index: 1;
        position: relative;
    }
    .hero-nav-subtitle .the-letter.lifted {
        transform: translateY(-1.2em);
        opacity: 0;
    }
    .hero-nav-subtitle .the-letter.raised {
        transform: translateY(-0.5em);
    }
    .main-links {
        display: flex;
        gap: 18px;
        justify-content: flex-end;
        margin-top: 0;
        margin-bottom: 0;
        padding: 0;
    }
    .main-links a {
        font-size: 1rem;
        color: #181818; /* Black text */
        text-decoration: none;
        opacity: 0.90; /* Keep for subtle initial fade, or remove for full opacity */
        font-weight: normal;
        display: flex;
        align-items: center; /* Aligns toad icon and text vertically */
        justify-content: flex-start; /* Aligns content to the left */
        gap: 0.5em; /* Spacing between icon and text */
        box-sizing: border-box;
        padding: 12px 25px; /* Adjust padding to your preference for rectangular shape */
        border-radius: 0; /* Ensures a perfectly rectangular shape */
        border: 4px solid #181818; /* Optional: Adds a thin black border to the white rectangle */
        margin: 0 0.1em; /* Keep current margins */
        background-color: #FFFFFF; /* White infill for the button */
        position: relative; /* Needed for z-index if other elements overlap */
        overflow: hidden; /* Ensures content stays within boundaries */
        z-index: 0;
        transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, opacity 0.2s ease;
    }
    .main-links .icon {
        display: inline-block; /* Or flex/grid depending on layout */
        width: 1.7em; /* Or whatever size your default icons should be */
        height: 1.7em;
        min-width: 1.7em;
        min-height: 1.7em;
        vertical-align: middle;
        margin-right: 0.1em;
        background-image: url("./images/toad icon static.png"); /* THE DEFAULT ICON */
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        image-rendering: auto;
        transition: background-image 0.15s, filter 0.2s ease;
    }
    /* Hover styles for the button (link) itself */
    .main-links a:hover,
    .main-links a:focus {
        background-color: #181818 !important; /* Background becomes black */
        color: #FDEDF4 !important; /* Text color becomes white */
        opacity: 1 !important;
        text-decoration: none !important;
        border-color: #FDEDF4 !important; /* Optional: Inverts the border color on hover */
    }
    /* Hover styles for the toad icon within the button */
    .main-links a:hover .icon {
        filter: brightness(0) invert(1) !important; /* Inverts the black toad PNG to white */
    }
    .main-links a.shop:hover .icon { background-image: url("./images/toad shop.png"); }
    .main-links a.contact:hover .icon { background-image: url("./images/toad mail.png"); }
    .main-links a.about:hover .icon { background-image: url("./images/toad about.png"); }
    .main-links a.work:hover .icon { background-image: url("./images/toad work.png"); }

    .nav-hero-separator,
    .banner-hero-separator {
        width: 86vw;
        max-width: 1200px;
        margin: 0 auto;
        height: 56px;
        position: relative;
        background: none;
        border: none;
        z-index: 2;
    }
    .nav-hero-separator svg,
    .banner-hero-separator svg {
        display: block;
        width: 100%;
        height: 56px;
        min-height: 56px;
    }
    .nav-hero-separator {
        margin-top: 10px;
    }
    .banner-hero-separator {
        margin-top: 0;
    }

    /* New containers for desktop/mobile banner content */
    .desktop-banner-container {
        display: block; /* Default for desktop */
    }
    .mobile-banner-container {
        display: none; /* Hidden by default for desktop */
    }

    .banner-image-mobile {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;

        transform: scale(1.3);
        transition: transform 0.3s ease;

        margin: 0;
        border-radius: 0;
        max-width: none;
    }

    .hero-images-spacing, .banner-images-spacing {
        height: 38px;
    }
    .hero-image-row .hero-image-box:not(:last-child) {
        border-right: none !important;
    }
    .hero-image-row {
        width: 100vw;
        display: flex; /* Displayed by default within desktop-banner-container */
        flex-direction: row;
        justify-content: center;
        align-items: stretch;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    .hero-image-box {
        flex: 1 1 0;
        aspect-ratio: 1/1;
        min-width: 0;
        min-height: 0;
        overflow: hidden;
        border: none;
        border-radius: 0;
        background: #FDEDF4;
        margin: 0;
        padding: 0;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .hero-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transform: scale(1.3);
        transition: transform 0.7s cubic-bezier(.22,.68,.32,1.1);
        border: none;
        border-radius: 0;
        box-shadow: none;
        background: #FDEDF4;
    }
    .hero-image-box:hover .hero-image,
    .hero-image-box:focus .hero-image {
        transform: scale(1);
    }

    .main-content {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        opacity: 1;
        transition: opacity 0.6s;
        background: #FDEDF4;
    }
    .main-content.hidden {
        opacity: 0;
        pointer-events: none;
    }

    /* Style for the main gallery section header */
    .gallery-section-header {
        font-family: 'Press Start 2P', monospace;
        font-size: 1.5rem; /* Adjust size as needed */
        letter-spacing: 0.04em;
        text-align: center;
        color: #181818;
        background-color: #FFFFFF;
        border: 4px solid #181818;
        padding: 12px 25px; /* Similar padding to nav links */
        border-radius: 0;
        display: block; /* Ensures it takes full width for centering */
        width: fit-content; /* Makes the box fit the text content */
        margin: 40px auto 30px auto; /* Centers horizontally and adds vertical spacing */
        text-decoration: none; /* In case it's ever wrapped in a link */
        font-weight: normal;
        box-sizing: border-box;
    }
    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 30px;
        padding: 40px 10vw 60px 10vw;
        max-width: 1200px;
        margin: 0 auto;
    }
    .gallery-item {
        background: none;
        border-radius: 0;
        box-shadow: none;
        overflow: visible;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0;
        position: relative;
    }
    .gallery-item img {
        width: 100%;
        max-width: 300px;
        aspect-ratio: 1/1;
        object-fit: cover;
        border-radius: 16px;
        margin-bottom: 10px;
        transition: transform 0.3s cubic-bezier(.25,1.7,.45,.84);
        box-shadow: none;
        background: #FDEDF4;
        cursor: pointer;
        display: block;
    }
    .gallery-item:hover img,
    .gallery-item:focus-within img {
        transform: scale(1.13) rotate(-2deg);
        z-index: 2;
    }
    .gallery-overlay {
        position: absolute;
        left: 0; top: 0; right: 0; bottom: 10px;
        border-radius: 16px;
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.22s;
        font-family: 'Press Start 2P', cursive, monospace;
        font-weight: normal;
        text-align: center;
        padding: 1.2em 0.8em 0.8em 0.8em;
        font-size: 0.75rem;
        z-index: 10;
        letter-spacing: 0.01em;
    }
    .gallery-item:hover .gallery-overlay,
    .gallery-item:focus-within .gallery-overlay {
        opacity: 1;
        pointer-events: auto;
    }
    .gallery-overlay-title,
    .gallery-overlay-meta,
    .gallery-overlay-view {
        color: #fff;
        text-shadow:
            2px 2px 0 #111,
            0 2px 0 #111,
            2px 0 0 #111;
    }
    .gallery-overlay-title {
        font-size: 0.8rem;
        margin-bottom: 0.3em;
        line-height: 1.1;
        font-family: 'Press Start 2P', cursive, monospace;
        font-weight: normal;
        letter-spacing: 0.01em;
    }
    .gallery-overlay-meta {
        font-size: 0.7rem;
        opacity: 0.90;
        margin-bottom: 0.4em;
        font-family: 'Press Start 2P', cursive, monospace;
        font-weight: normal;
    }
    .gallery-overlay-view {
        background: none;
        border: 2px solid #fff;
        border-radius: 20px;
        padding: 0.2em 1em;
        font-size: 0.7rem;
        font-family: 'Press Start 2P', cursive, monospace;
        font-weight: normal;
        margin-top: 0.2em;
        text-decoration: none;
        display: inline-block;
        transition: background 0.18s, color 0.18s, border-color 0.18s, text-shadow 0.18s;
        box-shadow: none;
        cursor: pointer;
        opacity: 0.94;
    }
    .gallery-overlay-view:hover, .gallery-overlay-view:focus {
        background: #fff;
        color: #111;
        border-color: #111;
        text-shadow: none;
    }
    .gallery-item .caption {
        margin-top: 8px;
        font-size: 1rem;
        /* Applying button-like styles here: */
        background-color: #FFFFFF !important; /* White background */
        color: #181818 !important; /* Black text */
        border: 4px solid #181818 !important; /* Black border (similar to desktop nav links) */
        padding: 8px 15px !important; /* Padding for the box */
        border-radius: 0 !important; /* Rectangular corners */
        display: inline-block !important; /* Allow padding/border and fit content */
        width: fit-content !important; /* Make the box fit its content */
        margin-left: auto !important; /* For horizontal centering */
        margin-right: auto !important; /* For horizontal centering */
        box-sizing: border-box !important; /* Include padding/border in width */
        /* End of new styles */

        font-family: 'Press Start 2P', cursive, monospace;
        text-align: center;
    }
    .footer-social {
        width: 100vw;
        padding: 32px 0 22px 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        background: none;
        margin-top: 60px;
        justify-content: center;
    }
    .footer-social-links {
        display: flex;
        gap: 24px;
        margin-bottom: 6px;
        justify-content: center;
        align-items: center;
        width: 100%;
    }
    .footer-social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        color: #444;
        font-size: 1rem;
        font-family: 'Press Start 2P', cursive, monospace;
        transition: color 0.18s, filter 0.18s;
        gap: 0.5em;
    }
    .footer-social-link svg {
        width: 1.5em;
        height: 1.5em;
        margin-right: 8px;
        vertical-align: middle;
        fill: currentColor;
        transition: transform 0.2s;
    }
    .footer-social-link:hover svg {
        transform: scale(1.18);
    }
    .footer-social-link:hover,
    .footer-social-link:focus {
        color: #111;
        filter: brightness(0.7);
        text-decoration: none;
    }
    .footer-social-label {
        font-size: 0.85rem;
        color: #aaa;
        font-family: 'Press Start 2P', cursive, monospace;
        margin-top: 2px;
        letter-spacing: 0.07em;
        text-align: center;
    }

    .hopping-toad {
        position: fixed; /* Important for absolute positioning relative to viewport */
        z-index: 9999; /* Ensure it's on top during the hop */
        transition: transform 0.8s cubic-bezier(.48,1.48,.56,.97), opacity 0.8s;
        opacity: 1; /* Start visible */
    }

    /* Styles for the static toads collected in the header (consolidated) */
    .hopped-toad {
        width: 100%; /* To fill the grid cell */
        height: auto; /* Maintain aspect ratio */
        object-fit: contain; /* Ensures the image fits without distortion */
        image-rendering: pixelated; /* Keep pixelated look */
    }

    /* Styles for the "hopped" toads container - Desktop version hidden */
    .hopped-toad-container {
        display: block; /* Hidden by default on desktop */
    }

    /* Existing styles for the mobile collected toads box - remains hidden by default */
    .collected-toads-box {
        display: block; /* This box is hidden globally by your current CSS */
        width: 180px; /* Fixed width for the box */
        height: 180px; /* Fixed height for the box */
        border: 5px solid #FFFFFF; /* White border */
        position: relative;
        margin-top: 100px; /* Minimal spacing under the logo */
        box-sizing: border-box;
        background-color: rgba(255, 255, 255, 0.1); /* Slightly transparent background */
        padding: 5px; /* Inner padding for the grid */
    }

    .collected-toads-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr); /* 4 columns */
        grid-template-rows: repeat(4, 1fr); /* 4 rows */
        gap: 2px; /* Small gap between toads */
        width: 100%;
        height: 100%;
        overflow: hidden; /* Hide any overflow */
    }

    .toad-counter {
        position: absolute;
        bottom: 5px;
        right: 5px;
        color: #FFFFFF; /* White text for the counter */
        font-family: 'Press Start 2P', monospace !important; /* Same font as nav links */
        font-size: 0.8rem;
        letter-spacing: 0.04em;
        text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000; /* Outline */
    }

    /* NEW: Base styles for the new desktop box - Add this after the above .collected-toads-box */
    .desktop-collected-toads-box {
        display: none; /* Hidden by default, will be shown only on desktop */
        width: 180px; /* Fixed width for the box */
        height: 180px; /* Fixed height for the box */
        border: 2px solid #FFFFFF; /* White border */
        position: relative;
        box-sizing: border-box;
        background-color: rgba(255, 255, 255, 0.1); /* Slightly transparent background */
        padding: 5px; /* Inner padding for the grid */
    }

    @media (min-width: 701px) { /* NEW MEDIA QUERY: Applies ONLY to desktop screens */
        .hero-header {
            display: grid; /* CHANGED FOR DESKTOP: Switch hero-header to Grid layout */
            grid-template-columns: auto 180px 1fr; /* Defines 3 columns: Logo (auto), Toad Box (180px), Nav (remaining) */
            grid-template-areas:
                "logo desktop-toads-box nav"; /* Defines named areas for desktop layout */
            align-items: center; /* Vertically aligns items in the middle of their grid row */
            /* If you have 'justify-content: space-between;' in your global .hero-header, you can remove it or set to 'unset' here. */
        }

        /* Assign existing elements to their grid areas on desktop */
        .hero-logo-col {
            grid-area: logo;
        }

        .desktop-collected-toads-box {
            display: block; /* Show the new desktop box on desktop */
            grid-area: desktop-toads-box; /* Place it in the defined grid area */
            margin: 0 20px; /* Add horizontal margin for spacing on desktop */
        }

        .hero-nav-col {
            grid-area: nav;
        }

        /* IMPORTANT: Ensure the original mobile box remains hidden when on desktop */
        #collectedToadsBox {
            display: none;
        }
    }

    @media (max-width: 700px) {
        /* Hides the new desktop box on mobile screens */
        .desktop-collected-toads-box {
            display: none;
        }

        /* Your existing mobile styles for .hero-header, #collectedToadsBox, etc.,
           remain here and will function exactly as they did before.
           NO CHANGES ARE MADE to this block regarding your existing mobile layout. */
       }

       /* MOBILE OPTIMIZATION (only for mobile) */
@media (max-width: 700px) {
    html, body {
        font-size: 15px;
    }
   .hero-header {
        display: grid;
        grid-template-columns: auto 1fr;
        grid-template-rows: auto auto;
        grid-template-areas:
            "logo nav"
            "toads-box ."; /* Changed to 'toads-box' for the new container */
        align-items: start;
        padding: 0 4vw 0 2vw;
        margin-top: 14px;
        width: 100vw;
        max-width: 100vw;
        box-sizing: border-box;
        position: relative;
        /* NEW: Set a minimum height for the header */
        min-height: 120px; /* Adjust this value as needed */
        /* This min-height should be enough to contain your logo and
           the maximum expected height of your title/subtitle without pushing the logo down. */
    }

    .hero-logo-col {
        grid-area: logo; /* Assign this to the 'logo' area in the grid */
        flex: 0 0 auto; /* Keep these if they don't interfere with grid's sizing */
        margin-right: 0px;
        margin-top: 0px;
        margin-bottom: 0; /* Remove margin-bottom here as the box will handle spacing */
    }

    .logo-circle {
        padding: 8px;
        margin-bottom: 0; /* No margin here, handled by parent flex column */
    }

    /* Show the collected toads box on mobile */
    .collected-toads-box {
        display: block; /* Show on mobile */
        grid-area: toads-box; /* Assign to the 'toads-box' area */
        margin-top: 50px; /* Minimal spacing under the logo */
        margin-left: 0; /* Align to the left of the logo column */
        margin-right: auto; /* Keep it aligned left */
    }

    .hero-nav-col {
        grid-area: nav; /* Assign this to the 'nav' area in the grid */
        display: flex;
        flex-direction: column;
        align-items: flex-end; /* Keep alignment to the right for title/subtitle */
        flex-grow: 1;
        width: 100%; /* Take full width of its grid cell */
        max-width: none; /* Remove max-width that might constrain in grid */
        margin: 0;
        padding: 0;
        margin-top: 0px;
    }
    .hero-nav-title {
        text-align: right; /* Keep text aligned to the right */
        width: 100%;
        font-size: 3rem;
        -webkit-text-stroke: 1.5px #000;
        text-stroke: 1.5px #000;
        margin-bottom: 8px;
        word-break: break-word;
        hyphens: auto;
        line-height: 1;
        padding-left: 0;
    }
    .hero-nav-subtitle {
        text-align: right; /* Keep text aligned to the right */
        width: 100%;
        font-size: 3rem;
        text-shadow:
            -1.5px -1.5px 0 #000,
            1.5px -1.5px 0 #000,
            -1.5px 1.5px 0 #000,
            1.5px 1.5px 0 #000,
            0px -1.5px 0 #000,
            0px 1.5px 0 #000,
            -1.5px 0px 0 #000,
            1.5px 0px 0 #000;
        margin-bottom: 18px;
        margin-top: 0;
        word-break: break-word;
        hyphens: auto;
        line-height: 1.2;
    }

    #hoppedToadContainer {
        display: none; /* Hide the old hopped toad container on mobile */
    }
    .hopped-toad {
        /* These styles are now applied to toads within the grid */
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    /* Your existing .main-links and .news-banner styles (unchanged) */
    .main-links {
        position: absolute;
        top: 200px;
        left: 2vw;
        width: fit-content;
        min-width: 180px;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        background-color: #FDEDF4;
        padding-bottom: 10px;
        box-sizing: border-box;
        z-index: 10;
        gap: 5px;
    }
    .main-links.active {
        max-height: 500px;
    }
    .main-links a {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 8px;
        font-size: 0.95rem;
        width: 100%;
        box-sizing: border-box;
        padding: 0.5em 1em;
        border-radius: 0px;
        border: 2px solid #181818;
        background-color: #FFFFFF;
        margin: 0;
        text-decoration: none;
        color: #181818;
        position: relative;
        overflow: hidden;
        z-index: 0;
        transition: background-color 0.2s ease, color 0.2s ease;
    }
    .main-links a::before {
        content: none;
        background-image: none;
    }
    .main-links .icon {
        display: inline-block;
        width: 24px;
        height: 24px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        background-image: url("./images/toad icon static.png");
    }
    .main-links a.shop:hover .icon 	{ background-image: url("./images/toad shop.png"); }
    .main-links a.contact:hover .icon { background-image: url("./images/toad mail.png"); }
    .main-links a.about:hover .icon 	{ background-image: url("./images/toad about.png"); }
    .main-links a.work:hover .icon 	{ background-image: url("./images/toad work.png"); }
    .main-links a:hover .icon {
        filter: brightness(0) invert(1) !important;
    }

    /* Hover styles for mobile links */
    .main-links a:hover,
    .main-links a:focus {
        background-color: #181818 !important;
        color: #FDEDF4 !important;
        opacity: 1 !important;
        text-decoration: none !important;
    }

    /* --- MODIFIED: Remove hover filter for the now-removed SVG pseudo-element --- */
    .main-links a:hover::before {
        filter: none; /* No filter needed as ::before content is gone */
    }

    /* MODIFICATIONS START HERE for banner and separators */
    .nav-hero-separator, .banner-hero-separator {
        /* Force hide separators on mobile, removing all their space */
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        overflow: hidden !important;
        /* Also ensure their original width/min-width/max-width/height are overridden */
        width: 0 !important;
        min-width: 0 !important;
        max-width: 0 !important;
    }
    .nav-hero-separator svg, .banner-hero-separator svg {
        display: none !important; /* Also hide SVG content directly */
        height: 0 !important;
        min-height: 0 !important;
    }

    .desktop-banner-container {
        display: none; /* Keep hidden on mobile */
    }
    .mobile-banner-container {
        display: block; /* Show on mobile */
        width: 100vw; /* Take full viewport width */
        aspect-ratio: 1 / 0.9;
        overflow: hidden;
        margin: 0 0 10px 0; /* Align to edge, add bottom margin */
        border-radius: 0;

        /* APPLY THE WHITE BORDER HERE (to the container) */
        border: 10px solid #FFFFFF;
        /* Crucial: border is included *within* the 100vw width/height of the container */
        box-sizing: border-box;

        /* Ensure no padding here, as border is now on container */
        padding: 0;
    }

    .banner-images-spacing {
        /* Ensure any old spacing elements are also completely removed */
        height: 0 !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .banner-image-mobile {
        display: block;
        width: 100%; /* Image fills the container's *inner* space */
        height: 100%; /* Image fills the container's *inner* space */
        object-fit: cover; /* Ensures image covers the area, cropping if needed */
        object-position: center;

        /* IMPORTANT: Remove 'border' and 'box-sizing' from the image itself */
        border: none; /* Make sure no border is on the image itself */
        box-sizing: content-box; /* Revert to default for image */

        /* IMPORTANT: Do NOT set transform: none; here. This allows the global transform: scale(1.3); to apply for the "zoomed in" effect */
        /* If you want a specific zoom, you can explicitly set it here, e.g., transform: scale(1.3); */

        margin: 0;
        border-radius: 0;
        max-width: none;
    }
    /* END MODIFICATIONS for banner and separators */

    .hero-image-row {
        flex-direction: column !important;
        width: 100vw;
        align-items: center;
    }
    .hero-image-box {
        width: 96vw;
        max-width: 100vw;
        margin: 0 auto 8px auto;
        aspect-ratio: 1/1;
    }
    .gallery-grid {
        grid-template-columns: 1fr;
        gap: 18px;
        padding: 10px 2vw 30px 2vw;
    }
    .gallery-item img {
        border-radius: 8px;
    }
    .footer-social-links {
        flex-direction: column;
        gap: 8px;
    }
    .footer-social-link {
        font-size: 0.8rem;
    }
    body, html {
        overflow-x: hidden;
        max-width: 100vw;
    }
    /* Frog animation sizing tweaks for mobile */
    .hero-nav-subtitle .frog-peep,
    .hero-nav-subtitle .frog-wrap {
        width: 1.2em;
        min-width: 1em;
    }
    .hero-nav-subtitle .frog-peep {
        height: 1.2em;
        min-height: 1.2em;
    }
    .hero-nav-subtitle .frog-wrap {
        height: 0.8em;
    }
    .hero-nav-subtitle .frog-wrap.fully-raised {
        height: 1.2em;
    }
}
/* MOBILE FONT OVERRIDE - MAXIMUM SPECIFICITY: this MUST be after all other CSS */
@media (max-width: 700px) {
    body .hero-nav-subtitle {
        font-family: 'DotGothic16', monospace !important;
    }
}
    </style>
</head>
<body>
    <div class="news-banner" id="newsBanner">
        <p>NEW STICKERS AVAILABLE!</p>
        <button class="close-banner-btn" aria-label="Close banner">&times;</button>
    </div>
    <section class="hero" id="hero">
      <div class="hero-header">
  <div class="hero-logo-col">
    <div class="logo-circle">
      <img src="images/Lazy toad site logo 3.png" alt="Lazy Toad Studios Logo" class="hero-logo">
    </div>
    <div class="collected-toads-box" id="collectedToadsBox">
        <div class="collected-toads-grid" id="collectedToadsGrid">
            </div>
        <div class="toad-counter" id="toadCounter">0 / 12</div>
    </div>
  </div>
  <div class="desktop-collected-toads-box" id="desktopToadsBox">
      <div class="collected-toads-grid" id="desktopToadsGrid">
          </div>
      <div class="toad-counter" id="desktopToadCounter">0 / 12</div>
  </div>
  <div class="hero-nav-col">
    <div class="hero-nav-title">
      LAZY TOAD STUDIOS
    </div>
    <div class="hero-nav-subtitle">怠け者なヒキガエルのスタジオ</div>
    <nav class="main-links">
      <a href="/shop.html" class="shop" title="Shop">
        <span class="icon" aria-hidden="true"></span>
        Shop
      </a>
      <a href="/contact.html" class="contact" title="Contact">
        <span class="icon" aria-hidden="true"></span>
        Contact
      </a>
      <a href="/about.html" class="about" title="About">
        <span class="icon" aria-hidden="true"></span>
        About
      </a>
      <a href="/work.html" class="work" title="Work">
        <span class="icon" aria-hidden="true"></span>
        Work
      </a>
    </nav>
  </div>
</div>
<div class="solid-separator-top"></div>

      <div class="desktop-banner-container">
          <div class="hero-images-spacing"></div>
          <div class="hero-image-row">
            <div class="hero-image-box" tabindex="0">
              <img src="images/walking temple website.jpg" alt="After the War" class="hero-image">
            </div>
            <div class="hero-image-box" tabindex="0">
              <img src="images/the botanist a4 website.jpg" alt="Ramen Battleship" class="hero-image">
            </div>
            <div class="hero-image-box" tabindex="0">
              <img src="images/3 Joe Shenton - Reunion.jpg" alt="PTSD Machine" class="hero-image">
            </div>
            <div class="hero-image-box" tabindex="0">
              <img src="images/5 Joe Shenton - Remnants.jpg" alt="Transporter" class="hero-image">
            </div>
          </div>
          <div class="banner-images-spacing"></div>
      </div>

      <div class="mobile-banner-container">
          <img src="images/the botanist a4 website.jpg" alt="Featured Banner" class="banner-image-mobile" />
      </div>

      <div class="solid-separator-bottom"></div>
    </section>
    <section class="main-content hidden" id="mainContent">
        <div style="max-width: 700px; margin: 0px auto 0 auto; padding: 20px;">
    <h2 id="galleryHeader" class="gallery-section-header">Gallery</h2>
</div>
        <div class="gallery-grid">
            <div class="gallery-item">
                <a href="gallery/after-the-war.html">
                    <img src="images/1 Joe Shenton - Respite.jpg" alt="Respite">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Respite</div>
                        <div class="gallery-overlay-meta">Gouache on paper · 2022</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/ptsd-machine.html">
                    <img src="images/4 Joe Shenton - Reflection.jpg" alt="PTSD Machine">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">PTSD Machine</div>
                        <div class="gallery-overlay-meta">Acrylic on canvas · 2023</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/transporter.html">
                    <img src="images/2 Joe Shenton - Routine.jpg" alt="Transporter">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Transporter</div>
                        <div class="gallery-overlay-meta">Digital illustration · 2021</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/ramen-battleship.html">
                    <img src="images/3 Joe Shenton - Reunion.jpg" alt="Ramen Battleship">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Ramen Battleship</div>
                        <div class="gallery-overlay-meta">Watercolor · 2020</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/walking-temple.html">
                    <img src="images/walking temple website.jpg" alt="Quiet day at the beach. Cold, but beautiful">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Quiet day at the beach</div>
                        <div class="gallery-overlay-meta">Digital painting · 2023</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/demons.html">
                    <img src="images/demons website.jpg" alt="Waiting for the bus in the desert">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Waiting for the bus in the desert</div>
                        <div class="gallery-overlay-meta">Ink · 2022</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/mountain.html">
                    <img src="images/mountain website.jpg" alt="Nature again.. At its finest!">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Nature again.. At its finest!</div>
                        <div class="gallery-overlay-meta">Acrylic · 2021</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/osaka.html">
                    <img src="images/osaka wesbite.jpg" alt="Canoeing again">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Canoeing again</div>
                        <div class="gallery-overlay-meta">Gouache · 2022</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/girl-train.html">
                    <img src="images/fisherman website.jpg" alt="A girl, and a train passing">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">A girl, and a train passing</div>
                        <div class="gallery-overlay-meta">Mixed media · 2023</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
            <div class="gallery-item">
                <a href="gallery/closegirl.html">
                    <img src="images/wanderer website.jpg" alt="What a beautiful day!">
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">What a beautiful day!</div>
                        <div class="gallery-overlay-meta">Digital · 2022</div>
                        <span class="gallery-overlay-view">View details</span>
                    </div>
                </a>
            </div>
        </div>
    </section>
    <div id="imgModal" class="modal" onclick="event.target === this && closeModal()">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()" aria-label="Close">&times;</button>
            <img id="modalImg" class="modal-img" src="" alt="">
            <div id="modalCaption" class="modal-caption"></div>
        </div>
    </div>
    <footer class="footer-social">
        <div class="footer-social-links">
            <a class="footer-social-link" href="mailto:contact@lazytoadstudios.com" target="_blank" rel="noopener" title="Contact Email">
                <svg viewBox="0 0 24 24"><path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2v.01L12 13 4 6.01V6h16zm-16 12V8.08l7.29 6.29a1 2 0 0 0 1.42 0L20 8.08V18H4z"/></svg>
                Contact
            </a>
            <a class="footer-social-link" href="https://instagram.com/lazytoadstudios" target="_blank" rel="noopener" title="Instagram">
                <svg viewBox="0 0 24 24"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5zm4.25 3.25a5.25 5.25 0 1 1 0 10.5 5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5zm6.13.38a1.13 1.13 0 1 1-2.25 0 1.13 1.13 0 0 1 2.25 0z"/></svg>
                Instagram
            </a>
            <a class="footer-social-link" href="https://twitter.com/lazytoadstudios" target="_blank" rel="noopener" title="Twitter">
                <svg viewBox="0 0 24 24"><path d="M22.46 5.94c-.8.36-1.67.6-2.58.72a4.48 4.48 0 0 0 1.96-2.48c-.88.52-1.85.9-2.88 1.1a4.47 4.47 0 0 0-7.62 4.08c-3.72-.19-7.02-1.97-9.23-4.68A4.47 4.47 0 0 0 3.22 9.7a4.47 4.47 0 0 1-2.02-.56v.06a4.47 4.47 0 0 0 3.58 4.38 4.47 4.47 0 0 1-2.01.08 4.47 4.47 0 0 0 4.18 3.11A8.95 8.95 0 0 1 2 19.54a12.66 12.66 0 0 0 6.88 2.02c8.26 0 12.79-6.84 12.79-12.77 0-.19 0-.39-.01-.58a9.33 9.33 0 0 0 2.3-2.37z"/></svg>
                Twitter
            </a>
            <a class="footer-social-link" href="https://facebook.com/lazytoadstudios" target="_blank" rel="noopener" title="Facebook">
                <svg viewBox="0 0 24 24"><path d="M17.525 8.998h-3.025v-1.55c0-.7.463-.863.788-.863h2.202V4.11l-3.032-.012C11.21 4.098 10 5.338 10 7.32v1.678H7.5V12h2.5v7h3v-7h2.025l.5-3.002z"/></svg>
                Facebook
            </a>
        </div>
        <div class="footer-social-label">
            &copy; 2025 Lazy Toad Studios &mdash; Connect with us!
        </div>
    </footer>
    <script>
    // Modal & scroll logic
    function openModal(img) {
        var modal = document.getElementById('imgModal');
        var modalImg = document.getElementById('modalImg');
        var modalCaption = document.getElementById('modalCaption');
        modalImg.src = img.src;
        modalImg.alt = img.alt;
        modalCaption.textContent = img.alt;
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }
    function closeModal() {
        var modal = document.getElementById('imgModal');
        modal.style.display = 'none';
        document.body.style.overflow = '';
    }
    document.addEventListener('keydown', function(e) {
        if(e.key === 'Escape') closeModal();
    });
    function scrollToMain() {
        document.getElementById('mainContent').classList.remove('hidden');
        window.scrollTo({ top: window.innerHeight + 1, behavior: 'smooth' });
    }
    window.addEventListener('scroll', function() {
        if(window.scrollY > window.innerHeight * 0.7) {
            document.getElementById('mainContent').classList.remove('hidden');
        }
    });

    // FROG "PEEP" ANIMATION SCRIPT AND GAME LOGIC
    document.addEventListener("DOMContentLoaded", function() {
    const subtitle = document.querySelector('.hero-nav-subtitle');
    const frogImgSrc = 'images/toad icon static.png'; // IMPORTANT: Verify this image path is correct
    const originalText = subtitle.textContent.trim();

    // --- MODIFICATION START ---
    // Conditionally select the correct grid and counter based on screen size
    let currentCollectedToadsGrid;
    let currentToadCounter;

    if (window.innerWidth > 700) { // Assuming 700px is your mobile breakpoint
        currentCollectedToadsGrid = document.getElementById('desktopToadsGrid');
        currentToadCounter = document.getElementById('desktopToadCounter');
    } else {
        currentCollectedToadsGrid = document.getElementById('collectedToadsGrid');
        currentToadCounter = document.getElementById('toadCounter');
    }
    // --- MODIFICATION END ---

    let collectedToadCount = 0;
    const maxToads = 12; // Max toads in the 4x4 grid

    // Function to update the toad counter
    function updateToadCounter() {
        if (currentToadCounter) { // Ensure the counter element exists
            currentToadCounter.textContent = `${collectedToadCount} / ${maxToads}`;
        }
    }

    subtitle.innerHTML = ''; // Clear original content

    // Create character spans and frog elements
    for (const c of originalText) {
        const wrap = document.createElement('span');
        wrap.className = 'char-frog-wrap';

        const letterWrap = document.createElement('span');
        letterWrap.className = 'letter-wrap';
        const letter = document.createElement('span');
        letter.className = 'the-letter';
        letter.textContent = c;
        letterWrap.appendChild(letter);

        const frogWrap = document.createElement('span');
        frogWrap.className = 'frog-wrap';
        const frog = document.createElement('img');
        frog.src = frogImgSrc;
        frog.alt = "🐸";
        frog.className = 'frog-peep';
        frog.style.height = '1.2em';
        frog.style.width = '1.2em';
        frogWrap.appendChild(frog);

        wrap.appendChild(letterWrap);
        wrap.appendChild(frogWrap);
        subtitle.appendChild(wrap);
    }

    const frogPeeps = subtitle.querySelectorAll('.frog-peep');

    // Global State for the current peep sequence
    let peepSequenceActive = false;
    let currentPeepsInSequence = 0; // How many individual peeps have occurred in the current 4-7 sequence
    let targetPeepsInSequence = 0;  // The random total (4-7) for the current sequence
    let mainSequenceSchedulerId = null; // Timeout for the 10-30 sec delay before a new sequence starts
    let individualPeepSchedulerId = null; // Timeout for the 0.5-1.5 sec delay between individual peeps
    let currentlyPeepingFrog = null; // Reference to the frog DOM element currently visible/animating its peep

    // Helper to reset a frog's visual state (classes and styles)
    function resetFrogVisuals(frogElement) {
        if (!frogElement) return;
        const wrap = frogElement.closest('.char-frog-wrap');
        const letter = wrap.querySelector('.the-letter');
        const frogWrap = wrap.querySelector('.frog-wrap');

        frogElement.classList.remove('fully-raised', 'peeping');
        frogWrap.classList.remove('fully-raised');
        letter.classList.remove('lifted', 'raised');
        // Keep opacity as is; opacity 0 means collected, opacity 1 means available.
        // pointerEvents as is; none for collected, auto for available.
    }

    // Function to perform a single peep animation on a specific frog
    // This function does NOT manage sequence counts or overall timing, just the visual peep.
    function doPeepAnimation(frogElement, shouldFullyRaise, callback) {
        if (!frogElement || frogElement.style.opacity === '0') { // Ensure frog exists and is not collected
            if (callback) callback();
            return;
        }

        // If there's a frog still active from the previous peep, instantly retract it
        if (currentlyPeepingFrog && currentlyPeepingFrog !== frogElement) {
            resetFrogVisuals(currentlyPeepingFrog);
            currentlyPeepingFrog.style.opacity = '1'; // Ensure it's visible if it was just retracted from peep
            currentlyPeepingFrog.style.pointerEvents = 'auto'; // Make it clickable again
        }
        currentlyPeepingFrog = frogElement; // Set the current frog that is about to peep

        // Reset visual state before starting the new peep (if it was from a previous peep)
        resetFrogVisuals(frogElement);
        frogElement.style.opacity = '1'; // Ensure it's fully visible before starting its peep
        frogElement.style.pointerEvents = 'auto'; // Make it clickable

        // Peep animation steps
        // Small delay to ensure CSS classes are applied for transitions to begin smoothly
        setTimeout(() => {
            frogElement.classList.add('peeping');
            frogElement.closest('.char-frog-wrap').querySelector('.the-letter').classList.add('raised');
        }, 50);

        // After initial peep animation completes
        setTimeout(() => {
            if (frogElement.style.opacity === '0') { // Check if the frog was clicked and collected during its peep
                if (callback) callback(); // Call completion callback if collected
                return;
            }

            if (shouldFullyRaise) {
                // Animate to fully raised state
                frogElement.classList.remove('peeping');
                frogElement.classList.add('fully-raised');
                frogElement.closest('.char-frog-wrap').querySelector('.frog-wrap').classList.add('fully-raised');
                frogElement.closest('.char-frog-wrap').querySelector('.the-letter').classList.remove('raised');
                frogElement.closest('.char-frog-wrap').querySelector('.the-letter').classList.add('lifted');

                // After fully raised, make it disappear (collected animation will handle opacity 0)
                // The duration of this timeout depends on your CSS transition for 'fully-raised'
                setTimeout(() => {
                    if (frogElement.style.opacity !== '0') { // Only modify if not clicked/collected already
                       frogElement.style.opacity = '0';
                       frogElement.style.pointerEvents = 'none';
                    }
                    currentlyPeepingFrog = null; // Clear reference as this frog is no longer peeping
                    resetFrogVisuals(frogElement); // Reset classes
                    if (callback) callback(); // Call completion callback
                }, 1500); // How long the toad stays fully raised before disappearing/cleanup

            } else {
                // Just peep and retract
                frogElement.classList.remove('peeping'); // Remove peeping class to retract
                frogElement.closest('.char-frog-wrap').querySelector('.the-letter').classList.remove('raised');

                setTimeout(() => {
                    currentlyPeepingFrog = null; // Clear reference as this peep is done
                    resetFrogVisuals(frogElement); // Ensure fully retracted classes are removed
                    if (callback) callback(); // Call completion callback
                }, 700); // Duration for retract animation
            }
        }, 1000); // Duration of the initial 'peeping' state before deciding next action (fully raise or retract)
    }

    // Schedules an individual peep within the current 4-7 peep sequence
    function scheduleIndividualRandomPeep() {
        // If the sequence is completed or not active, stop scheduling individual peeps
        if (!peepSequenceActive || currentPeepsInSequence >= targetPeepsInSequence) {
            peepSequenceActive = false; // Mark current sequence as finished
            startNextPeepSequence(); // Schedule the next overall sequence (10-30 sec delay)
            return;
        }

        currentPeepsInSequence++; // Increment count for this individual peep

        const availableFrogs = Array.from(frogPeeps).filter(frog => frog.style.opacity !== '0');
        if (availableFrogs.length === 0) {
            console.log("No frogs available to peep!");
            peepSequenceActive = false;
            startNextPeepSequence(); // Still schedule next overall sequence even if no frogs
            return;
        }

        // Select a random frog. Ensure it's not the same as the immediately previous one if possible.
        let frogToAnimate;
        let attempts = 0;
        const maxAttempts = 10; // Prevent infinite loop if only one frog left
        do {
            const idx = Math.floor(Math.random() * availableFrogs.length);
            frogToAnimate = availableFrogs[idx];
            attempts++;
        } while (frogToAnimate === currentlyPeepingFrog && availableFrogs.length > 1 && attempts < maxAttempts);


        // Determine if this frog should fully raise (become collectible)
        let shouldFullyRaise = false;
        // It can only fully raise after the 4th peep
        if (currentPeepsInSequence >= 4) {
            // 50% chance to fully raise OR it MUST fully raise if this is the very last peep in the sequence
            shouldFullyRaise = (Math.random() < 0.5) || (currentPeepsInSequence === targetPeepsInSequence);
        }

        // Perform the animation for this single peep
        doPeepAnimation(frogToAnimate, shouldFullyRaise, () => {
            // Callback function executed after doPeepAnimation completes its visual part
            if (shouldFullyRaise) {
                // If this frog fully raised, it means the player either caught it or missed it.
                // The current 4-7 peep sequence is considered complete.
                peepSequenceActive = false; // Mark sequence as finished
                startNextPeepSequence(); // Schedule the next overall sequence (10-30 sec delay)
            } else {
                // If it just peeped and retracted, schedule the next individual peep in this sequence
                individualPeepSchedulerId = setTimeout(() => {
                    scheduleIndividualRandomPeep();
                }, Math.random() * 1000 + 500); // Short random delay between individual peeps (0.5 to 1.5 seconds)
            }
        });
    }

    // Starts the overall 10-30 second sequence timer
    function startNextPeepSequence() {
        // Clear any existing sequence timers to prevent duplicates or conflicts
        if (mainSequenceSchedulerId) clearTimeout(mainSequenceSchedulerId);
        if (individualPeepSchedulerId) clearTimeout(individualPeepSchedulerId);

        // Ensure any frog that might have been peeping from a previous sequence/click is fully reset
        if (currentlyPeepingFrog) {
            resetFrogVisuals(currentlyPeepingFrog);
            currentlyPeepingFrog.style.opacity = '1';
            currentlyPeepingFrog.style.pointerEvents = 'auto';
            currentlyPeepingFrog = null;
        }

        // Schedule the start of the next 4-7 peep sequence
        mainSequenceSchedulerId = setTimeout(() => {
            peepSequenceActive = true;
            currentPeepsInSequence = 0; // Reset counter for the new sequence
            targetPeepsInSequence = Math.floor(Math.random() * 4) + 4; // Determine new random target (4 to 7)
            scheduleIndividualRandomPeep(); // Start the first individual peep of the new sequence
        }, Math.random() * 20000 + 10000); // 10 to 30 seconds delay before starting a new sequence
    }

    // Initial kick-off: Start the very first sequence
    startNextPeepSequence();
    updateToadCounter(); // Initialize counter display

    // GAME LOGIC: Click handler for the peeking frog with HOP ANIMATION
    frogPeeps.forEach(frog => {
        frog.onclick = function(event) {
            // Ensure the frog is currently peeping/raised AND clickable before processing click
            if ((frog.classList.contains('peeping') || frog.classList.contains('fully-raised')) && frog.style.pointerEvents !== 'none') {
                event.stopPropagation(); // Prevent event bubbling

                // Only collect if there's space in the box
                if (collectedToadCount < maxToads) {
                    // Clear all pending timers related to the current sequence immediately
                    if (mainSequenceSchedulerId) clearTimeout(mainSequenceSchedulerId);
                    if (individualPeepSchedulerId) clearTimeout(individualPeepSchedulerId);
                    peepSequenceActive = false; // End current sequence prematurely upon collection
                    currentlyPeepingFrog = null; // No frog is currently peeping after collection

                    // Make the original frog disappear immediately from the subtitle
                    frog.style.opacity = '0';
                    frog.style.pointerEvents = 'none'; // Make it unclickable

                    // --- Start Hop Animation Logic ---
                    const frogRect = frog.getBoundingClientRect(); // Get original frog's position

                    const hoppingToad = document.createElement('img');
                    hoppingToad.src = frogImgSrc; // Use the same image source
                    hoppingToad.classList.add('hopping-toad'); // Class for the hopping animation
                    document.body.appendChild(hoppingToad); // Append to body for fixed positioning during hop

                    // Set initial position of the hopping toad (same as the clicked frog)
                    hoppingToad.style.left = frogRect.left + 'px';
                    hoppingToad.style.top = frogRect.top + 'px';
                    hoppingToad.style.width = frogRect.width + 'px'; // Maintain initial size
                    hoppingToad.style.height = frogRect.height + 'px';

                    // Calculate target position in the currentCollectedToadsGrid (THIS IS THE KEY CHANGE)
                    if (currentCollectedToadsGrid) { // Ensure the grid exists
                        const gridRect = currentCollectedToadsGrid.getBoundingClientRect();
                        const toadWidth = gridRect.width / 4;
                        const toadHeight = gridRect.height / 4;

                        // Calculate target column and row for stacking in columns
                        const targetColumn = Math.floor(collectedToadCount / 4); // 0-3
                        const targetRow = collectedToadCount % 4; // 0-3

                        const targetX = gridRect.left + (targetColumn * toadWidth) + (toadWidth / 2) - (frogRect.width / 2);
                        const targetY = gridRect.top + (targetRow * toadHeight) + (toadHeight / 2) - (frogRect.height / 2);

                        // Trigger hopping animation after initial positioning is rendered
                        requestAnimationFrame(() => {
                            requestAnimationFrame(() => { // Double rAF for smoother transition start
                                const translateX = targetX - frogRect.left;
                                const translateY = targetY - frogRect.top;

                                // Apply transform for the hop (with an upward arc) and fade out
                                hoppingToad.style.transform = `translate(${translateX}px, ${translateY}px) translateY(-50px)`;
                                hoppingToad.style.transition = 'transform 0.8s cubic-bezier(.48,1.48,.56,.97), opacity 0.8s';
                                hoppingToad.style.opacity = '0'; // Fade out as it reaches the destination
                            });
                        });

                        // Clean up the hopping toad and add the final static toad
                        hoppingToad.addEventListener('transitionend', () => {
                            hoppingToad.remove(); // Remove the temporary hopping toad element

                            // Create and append the final static toad to the correct grid
                            const finalToad = document.createElement('img');
                            finalToad.src = frogImgSrc; // Use the same image
                            finalToad.classList.add('hopped-toad'); // Class for static collected toads
                            currentCollectedToadsGrid.appendChild(finalToad); // Append to the *correct* grid

                            collectedToadCount++; // Increment collected toad count
                            updateToadCounter(); // Update counter display

                            // Reset visual state of the original subtitle frog (it's already opacity:0, pointer-events:none)
                            resetFrogVisuals(frog);

                            // Start the next overall peep sequence after collection
                            startNextPeepSequence();

                        }, { once: true }); // Ensure this listener runs only once per hop
                    } else {
                        // Fallback if grid is not found (shouldn't happen with correct IDs)
                        console.error("Collected toads grid element not found!");
                        hoppingToad.remove(); // Remove hopping toad if target not found
                        startNextPeepSequence();
                    }
                } else {
                    // If box is full, just reset the frog without collecting
                    resetFrogVisuals(frog);
                    frog.style.opacity = '1';
                    frog.style.pointerEvents = 'auto';
                    startNextPeepSequence(); // Start next sequence
                }
            }
        };
    });

    // Mobile Navigation Toggle (existing code, unchanged)
    const logoElement = document.querySelector('.logo-circle');
    const navLinksContainer = document.querySelector('.main-links');

    if (logoElement && navLinksContainer) {
        logoElement.style.cursor = 'pointer';

        logoElement.addEventListener('click', () => {
            if (window.innerWidth <= 700) {
                navLinksContainer.classList.toggle('active');
            }
        });
    }
    // News Banner Close Button (existing code, unchanged)
    const newsBanner = document.getElementById('newsBanner');
    const closeBannerBtn = document.querySelector('.close-banner-btn');

    if (newsBanner && closeBannerBtn) {
        closeBannerBtn.addEventListener('click', function() {
            newsBanner.classList.add('hidden');
            document.body.style.paddingTop = '0';
        });
    }
});
</script>
</body>
</html>
